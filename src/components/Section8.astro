<script>
import { gsap } from '@/lib/gsap';

const array = gsap.utils.toArray<SVGPathElement>('.am-section-8 svg path');
let duration = 5;
let distance = 0;

let tl = gsap.timeline({
  repeat: -1,       // 🔁 repetir todo el timeline infinito
  repeatDelay: 1    // (opcional) pausa entre repeticiones
});

array.map(path => (distance += path.getTotalLength()));

array.map(path => {
  tl.from(path, {
    drawSVG: 0,
    duration: duration * (path.getTotalLength() / distance),
    ease: 'power1.inOut'
  });
});

</script>

<section class='am-section am-section-8'>
  <svg
    xmlns='http://www.w3.org/2000/svg'
    xml:space='preserve'
    width='1920'
    height='1080'
    viewBox='0 0 508 285.75'
    ><g
      ><path
        d='M128.273 167.976a51.085 51.085 0 0 1 19.851-16.798c5.468-2.597 11.652-4.217 17.586-3.027 2.968.594 5.816 1.902 8.069 3.923 2.252 2.021 3.883 4.772 4.377 7.758.491 2.963-.146 6.055-1.524 8.724-1.378 2.668-3.466 4.93-5.851 6.755-4.77 3.65-10.603 5.556-16.201 7.733-5.599 2.176-11.278 4.837-15.07 9.496-1.896 2.33-3.258 5.137-3.633 8.117-.374 2.98.29 6.128 2.067 8.55 1.354 1.845 3.303 3.215 5.439 4.038 2.136.823 4.454 1.115 6.741 1.035 4.575-.16 8.958-1.766 13.277-3.286 4.318-1.52 8.773-2.99 13.35-2.862 2.287.064 4.582.54 6.631 1.56 2.05 1.02 3.843 2.604 4.955 4.605 1.503 2.706 1.673 6 1.045 9.03-.629 3.032-1.995 5.855-3.438 8.594-1.443 2.74-2.983 5.447-4 8.371-1.017 2.924-1.489 6.125-.734 9.127a11.728 11.728 0 0 0 3.044 5.381 11.728 11.728 0 0 0 5.368 3.07c2.02.517 4.18.48 6.182-.108a11.728 11.728 0 0 0 5.258-3.253'
      ></path><path
        d='M219.896 41.23c-.95-5.038.35-10.458 3.482-14.518 3.131-4.06 8.044-6.692 13.158-7.053 5.115-.36 10.348 1.559 14.018 5.14 3.67 3.58 5.716 8.764 5.482 13.886-.229 5.008-2.518 9.723-5.445 13.792-2.928 4.07-6.505 7.62-9.767 11.427-3.262 3.806-6.266 7.975-7.748 12.764-.74 2.395-1.086 4.926-.863 7.422.222 2.497 1.026 4.958 2.444 7.024 2.405 3.505 6.415 5.652 10.548 6.641 4.134.99 8.437.942 12.686.853 4.25-.09 8.543-.21 12.707.641 4.164.851 8.255 2.782 10.889 6.118 1.423 1.802 2.373 3.96 2.844 6.207.471 2.247.47 4.583.098 6.849-.743 4.532-2.935 8.717-5.615 12.446-5.36 7.459-12.808 13.503-16.67 21.836-3.033 6.545-3.562 14.213-1.458 21.112 2.104 6.9 6.822 12.966 12.99 16.705 6.169 3.738 13.73 5.114 20.82 3.786 7.09-1.327 13.643-5.345 18.041-11.062'
      ></path><path
        d='M344.096 259.6c1.284 4.504 4.344 8.476 8.371 10.867 4.028 2.391 8.98 3.176 13.55 2.146 4.569-1.03 8.706-3.863 11.319-7.75 2.613-3.888 3.673-8.788 2.9-13.408-.88-5.264-4.034-9.962-8.055-13.47-4.022-3.509-8.876-5.93-13.832-7.909-2.157-.861-4.362-1.655-6.32-2.904-1.959-1.248-3.684-3.021-4.37-5.24-.704-2.278-.215-4.844 1.092-6.839 1.306-1.995 3.372-3.432 5.63-4.197 2.26-.764 4.703-.885 7.07-.593 2.366.293 4.666.988 6.9 1.82 4.47 1.667 8.772 3.912 13.465 4.762 2.347.425 4.783.488 7.103-.061 2.32-.55 4.522-1.74 6.079-3.545 1.533-1.78 2.384-4.096 2.565-6.438.181-2.342-.283-4.708-1.149-6.891-1.733-4.367-4.98-7.933-8.182-11.37-3.202-3.438-6.493-6.949-8.346-11.266-.927-2.158-1.473-4.503-1.39-6.85.083-2.348.818-4.698 2.25-6.56 1.01-1.314 2.344-2.362 3.814-3.127 1.47-.765 3.074-1.253 4.706-1.542 3.263-.576 6.607-.363 9.918-.219 3.311.145 6.68.215 9.883-.636 1.601-.425 3.15-1.081 4.512-2.026 1.361-.945 2.532-2.184 3.307-3.649 1.08-2.04 1.35-4.453 1.001-6.735-.348-2.283-1.288-4.445-2.5-6.41-2.425-3.93-5.904-7.09-8.682-10.778-4.783-6.353-7.404-14.4-6.806-22.33.598-7.929 4.527-15.643 10.879-20.428 4.982-3.754 11.156-5.617 16.288-9.162 5.21-3.599 9.206-8.922 11.208-14.928 2.002-6.007 1.999-12.663-.01-18.668'
      ></path><path
        d='M32.068 262.144c8.075-1.047 15.637-5.584 20.36-12.216 3.657-5.133 5.609-11.394 5.916-17.689.308-6.295-.986-12.617-3.37-18.451-2.407-5.892-5.957-11.486-6.617-17.816-.698-6.692 2.193-13.652 7.427-17.88 5.234-4.226 12.647-5.589 19.042-3.499'
        style='fill:none;stroke:url(#d);stroke-width:12.6402;stroke-linejoin:round;fill-opacity:1'
      ></path><path
        d='M125.218 114.02c3.068 5.455 8.39 9.595 14.432 11.226 6.041 1.631 12.724.732 18.12-2.438 5.395-3.17 9.434-8.57 10.95-14.641 1.517-6.072.491-12.736-2.78-18.07-2.392-3.901-5.855-7.016-9.358-9.96-3.503-2.944-7.127-5.81-9.985-9.383-5.879-7.353-7.997-17.562-5.528-26.647 2.468-9.084 9.462-16.817 18.254-20.183'
      ></path><path
        d='M333.916 130.309a19.318 19.318 0 0 0 10.742.093 19.318 19.318 0 0 0 9.11-5.693c2.376-2.663 3.98-5.977 4.781-9.455.802-3.478.816-7.116.232-10.637-1.167-7.043-4.658-13.5-8.753-19.348-4.094-5.847-8.833-11.222-12.932-17.067-4.099-5.844-7.598-12.296-8.78-19.336-1.291-7.701.357-15.859 4.537-22.454 4.18-6.596 10.854-11.568 18.37-13.687'
      ></path><path
        d='M229.567 200.553c.656 7.472 3.875 14.696 8.993 20.18 5.118 5.483 12.103 9.193 19.512 10.361 2.678.423 5.42.527 8.02 1.292 1.3.382 2.562.933 3.659 1.73 1.097.796 2.026 1.847 2.574 3.086.457 1.036.641 2.184.587 3.315-.053 1.131-.34 2.245-.784 3.286-.89 2.083-2.389 3.847-4.006 5.433-1.617 1.585-3.375 3.025-4.933 4.668-1.559 1.643-2.933 3.528-3.59 5.695a10.134 10.134 0 0 0 .842 7.785 10.134 10.134 0 0 0 6.189 4.795c2.593.683 5.457.266 7.748-1.128a10.133 10.133 0 0 0 4.564-6.362'
      ></path><path
        d='M419.43 267.234c5.229 3.134 11.75 4.028 17.63 2.416 5.877-1.612 11.031-5.707 13.93-11.069 2.257-4.174 3.151-8.999 3.052-13.743-.1-4.744-1.16-9.426-2.622-13.94-2.925-9.03-7.475-17.53-9.592-26.782-2.455-10.723-1.463-22.208 2.794-32.352 4.257-10.144 11.758-18.897 21.13-24.658'
      ></path><path
        d='M21.956 34.193a42.052 42.052 0 0 1 16.197-10.438c4.259-1.508 8.946-2.313 13.295-1.086 2.174.614 4.222 1.741 5.793 3.364 1.572 1.622 2.648 3.752 2.867 6 .21 2.155-.366 4.35-1.447 6.225-1.081 1.876-2.648 3.444-4.417 4.692-3.537 2.496-7.79 3.712-11.916 5.028-4.124 1.316-8.331 2.848-11.496 5.803-1.582 1.478-2.869 3.304-3.545 5.36-.677 2.056-.717 4.349.068 6.366.586 1.508 1.613 2.827 2.865 3.85 1.253 1.024 2.726 1.76 4.267 2.252 3.083.984 6.381 1.002 9.616.919 3.234-.083 6.503-.255 9.677.373 1.587.315 3.142.831 4.55 1.628 1.408.796 2.667 1.879 3.578 3.216 1.525 2.24 1.99 5.113 1.513 7.78-.477 2.667-1.846 5.128-3.662 7.139-3.631 4.021-8.83 6.195-13.872 8.178-5.043 1.983-10.272 4-14.11 7.825-1.92 1.912-3.444 4.268-4.131 6.889-.687 2.62-.492 5.512.788 7.9a9.603 9.603 0 0 0 5.883 4.673 9.603 9.603 0 0 0 7.435-1.074'
      ></path></g
    ></svg
  >
</section>

<style>
  .am-section {
    height: 100vh;
    position: relative;
    background: conic-gradient(at bottom left, deeppink, cyan);
  }

  svg {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 5;
  }

  path {
    fill: none;
    stroke-width: 12px;
    stroke: cyan;
  }

  .path {
    fill: none;
    stroke-linejoin: round;
  }

  .fill-inner {
    stroke: #000;
    stroke-width: 0.79375;
    opacity: 0;
  }

  .fill-outset-7,
  .fill-outset-71 {
    stroke: lime;
    opacity: 8;
    stroke-width: 12px;
  }
</style>
